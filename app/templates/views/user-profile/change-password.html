{% extends "withoutnav_template.html" %}
{% from "components/page-header.html" import page_header %}
{% from "components/page-footer.html" import page_footer %}
{% from "components/form.html" import form_wrapper %}
{% from "govuk_frontend_jinja/components/back-link/macro.html" import govukBackLink %}
{% from "components/password-strength-indicator.html" import password_strength_indicator %}

{% block per_page_title %}
  Change your password
{% endblock %}

{% block backLink %}
  {{ govukBackLink({ "href": url_for('.user_profile') }) }}
{% endblock %}

{% block maincolumn_content %}

  {{ page_header('Change your password') }}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-three-quarters">
      {% call form_wrapper(autocomplete=True) %}
        {{ form.old_password }}
        {% if form.new_password.errors %}
          {{ form.new_password(param_extensions={
              "label": {"text": label},
              "errorMessage": {
                  "text" : form.new_password.errors[0] | safe
              }
          }) }}
        {% else %}
          {{ form.new_password }}
        {% endif %}
        {{password_strength_indicator()}}
        {{ page_footer('Save') }}
      {% endcall %}
    </div>
  </div>

{% endblock %}
